# 签名程序使用示例

## 完整功能测试流程

### 1. 启动程序
```bash
cd /Users/mayichong/go/blockChainBrowser/client/signer
./signer
```

### 2. 系统密码验证
```
请输入系统密码: hello
✅ 系统密码验证成功
```

### 3. 导入私钥测试
选择菜单选项 "2. 导入私钥"

```
=== 私钥导入 ===
请输入私钥 (十六进制格式，不带0x前缀): 1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef
请选择链类型:
1. ETH (Ethereum)
2. BTC (Bitcoin)
请选择 (1-2): 1
请输入描述 (可选): 测试ETH钱包
请输入加密密码: mypassword123
请输入对应的地址: 0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6
✅ 私钥导入成功
地址: 0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6
链类型: eth
描述: 测试ETH钱包
```

### 4. 密钥管理测试
选择菜单选项 "3. 密钥管理"

```
=== 密钥管理菜单 ===
1. 查看所有私钥
2. 删除私钥
3. 导出私钥
4. 返回主菜单
==================
请选择操作: 1

=== 私钥列表 ===
1. 地址: 0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6
   链类型: eth
   描述: 测试ETH钱包
   创建时间: 12345
   ---
```

### 5. QR码签名测试
选择菜单选项 "1. 导入QR码并签名"

```
=== QR码导入和签名 ===
请输入QR码数据 (JSON格式): {"id":123,"chainId":"1","nonce":42,"from":"0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6","to":"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48","value":"0x0","data":"0xa9059cbb000000000000000000000000742d35cc6634c0532925a3b8d4c9db96c4b4d8b600000000000000000000000000000000000000000000000000000000000f4240"}

✅ QR码数据解析成功
交易ID: 123
链类型: 1
发送地址: 0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6
🔷 检测到ETH交易，使用ETH签名器

=== ETH交易详情 ===
交易ID: 123
链ID: 1 (Ethereum)
Nonce: 42
发送地址: 0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6
接收地址: 0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48
交易金额: 0x0 wei
交易数据: 0xa9059cbb000000000000000000000000742d35cc6634c0532925a3b8d4c9db96c4b4d8b600000000000000000000000000000000000000000000000000000000000f4240
==================

是否确认签名此交易? (y/N): y

🔷 开始签名ETH交易...
请输入私钥解密密码: mypassword123
✅ ETH交易签名成功
签名结果: 0x02f86c012a80808094a0b86991c6218b36c1d19d4a2e9eb0ce3606eb4880b844a9059cbb000000000000000000000000742d35cc6634c0532925a3b8d4c9db96c4b4d8b600000000000000000000000000000000000000000000000000000000000f4240c001a0...

=== 签名导出 ===
1. 复制到剪贴板
2. 保存到文件
3. 返回主菜单
请选择导出方式: 1
✅ 签名数据已复制到剪贴板
```

### 6. 系统设置测试
选择菜单选项 "4. 系统设置"

```
=== 系统设置菜单 ===
1. 系统信息
2. 修改系统密码
3. 安全信息
4. 返回主菜单
==================
请选择操作: 1

=== 系统信息 ===
程序版本: 1.0.0
支持链: ETH, BTC
操作系统: darwin
Go版本: go1.21.0
================
```

## 测试数据示例

### ETH转账交易
```json
{
  "id": 123,
  "chainId": "1",
  "nonce": 42,
  "from": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
  "to": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  "value": "0xde0b6b3a7640000",
  "data": "0x"
}
```

### ERC-20代币转账
```json
{
  "id": 124,
  "chainId": "1",
  "nonce": 43,
  "from": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
  "to": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  "value": "0x0",
  "data": "0xa9059cbb000000000000000000000000742d35cc6634c0532925a3b8d4c9db96c4b4d8b600000000000000000000000000000000000000000000000000000000000f4240"
}
```

### ERC-20查询余额
```json
{
  "id": 125,
  "chainId": "1",
  "nonce": 44,
  "from": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
  "to": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  "value": "0x0",
  "data": "0x70a08231000000000000000000000000742d35cc6634c0532925a3b8d4c9db96c4b4d8b6"
}
```

## 安全特性验证

1. **密码验证**: 只有输入正确密码才能进入系统
2. **私钥加密**: 私钥使用AES-GCM加密存储
3. **离线运行**: 完全离线环境，不连接网络
4. **数据完整性**: 所有敏感数据都经过加密处理

## 注意事项

1. 测试私钥仅用于演示，请勿用于真实交易
2. 实际使用时请使用真实的私钥和地址
3. 确保在安全的离线环境中使用
4. 定期备份私钥文件

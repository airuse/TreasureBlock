# 区块链交易签名程序

## 概述

这是一个离线区块链交易签名程序，支持ETH和BTC交易的签名。程序采用内嵌密码验证和私钥加密存储，确保安全性。

## 功能特性

- ✅ **离线签名**: 完全离线环境，确保私钥安全
- ✅ **多链支持**: 支持ETH和BTC交易签名
- ✅ **密码保护**: 内嵌密码验证，防止未授权访问
- ✅ **私钥加密**: 使用加盐加密存储私钥
- ✅ **QR码导入**: 支持导入QR码数据进行签名
- ✅ **自动匹配**: 根据from地址自动匹配对应私钥

## 系统要求

- Go 1.21+
- 支持的操作系统: Windows, macOS, Linux

## 安装和运行

### 1. 编译程序

```bash
cd /Users/mayichong/go/blockChainBrowser/client/signer
go mod tidy
go build -o signer cmd/main.go
```

### 2. 运行程序

```bash
./signer
```

## 使用说明

### 1. 系统密码验证

程序启动后需要输入系统密码进行验证。默认密码为 "hello"。

### 2. 导入QR码并签名

1. 选择菜单选项 "1. 导入QR码并签名"
2. 选择链类型（ETH/BTC）
3. 输入QR码图片文件路径
4. 程序自动扫描QR码图片并解析数据
5. 根据from地址自动匹配对应的私钥
6. 确认交易详情后进行签名
7. 选择导出方式（剪贴板/文件）

### 3. QR码数据格式

程序支持的QR码数据格式：

```json
{
  "id": 123,
  "chainId": "1",
  "nonce": 42,
  "from": "0x742d35Cc6634C0532925a3b8D4C9db96C4b4d8b6",
  "to": "0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",
  "value": "0x0",
  "data": "0xa9059cbb...",
  "accessList": [...]
}
```

## 安全特性

### 1. 内嵌密码验证

- 使用SHA256哈希验证系统密码
- 密码哈希内嵌在代码中，防止未授权访问

### 2. 私钥加密存储

- 使用AES-GCM加密算法
- 加盐处理，防止彩虹表攻击
- 私钥在内存中解密，不存储明文

### 3. 离线环境

- 完全离线运行，不连接网络
- 私钥不会泄露到外部

## 开发状态

### 已完成功能

- ✅ 基础程序框架
- ✅ 系统密码验证
- ✅ QR码数据解析
- ✅ ETH交易签名实现
- ✅ BTC交易签名实现
- ✅ 私钥导入和管理
- ✅ 密钥管理功能
- ✅ 剪贴板操作
- ✅ 文件保存功能
- ✅ 系统设置功能
- ✅ 加密管理器
- ✅ 工具函数

### 功能特性

- ✅ **完整的ETH签名**: 支持EIP-1559交易签名
- ✅ **完整的BTC签名**: 支持P2PKH交易签名
- ✅ **私钥管理**: 导入、查看、删除、导出私钥
- ✅ **跨平台剪贴板**: 支持macOS、Linux、Windows
- ✅ **文件操作**: 保存签名结果到文件
- ✅ **系统信息**: 显示程序版本和系统信息
- ✅ **安全验证**: 内嵌密码验证和私钥加密

## 目录结构

```
signer/
├── cmd/
│   └── main.go              # 主程序入口
├── internal/
│   ├── crypto/
│   │   └── manager.go       # 加密管理器
│   ├── eth/
│   │   └── signer.go        # ETH签名器
│   ├── btc/
│   │   └── signer.go        # BTC签名器
│   └── utils/
│       └── utils.go         # 工具函数
├── pkg/
│   └── types.go             # 数据类型定义
├── go.mod                   # Go模块文件
└── README.md                # 说明文档
```

## 注意事项

1. **密码安全**: 请妥善保管系统密码，不要泄露给他人
2. **私钥安全**: 私钥使用加密存储，但仍需谨慎保管
3. **离线使用**: 建议在完全离线的环境中使用
4. **备份重要**: 请备份重要的私钥和签名结果

## 版本信息

- 版本: 1.0.0
- 开发状态: 开发中
- 最后更新: 2024-01-01
